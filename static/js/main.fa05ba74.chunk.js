(this["webpackJsonpmy-awesome-movie-searcher"]=this["webpackJsonpmy-awesome-movie-searcher"]||[]).push([[0],{82:function(e,t,a){e.exports=a(95)},91:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),i=a(35),o=a(16),u=a(74),s=a(66),m=a.n(s),E=(a(91),a(19)),d=a(32),v=a(119),f=a(123),p=a(124),h=a(136),b=function(){return r.a.createElement(v.a,{maxWidth:"md",style:{marginTop:"60px"}},r.a.createElement(f.a,{variant:"fullWidth"}),r.a.createElement(p.a,{container:!0,spacing:1},r.a.createElement(h.a,null,r.a.createElement("a",{href:"/"},"Privacy Policy"),r.a.createElement("p",null,"\xa9 2010-",(new Date).getFullYear()," by Movier-plus.com, Inc."))))},O=a(96),y=a(129),g=a(139),j=a(17),A=a(125),x=a(137),k=a(138),w=a(126),S=function(e,t){return{type:"@@APP/ROOT/SET_FAV_MOVIE_SAGA",payload:{id:e,currentStatus:t}}},P=function(e){return{type:"@@APP/ROOT/ADD_SEARCH",payload:e}},T=a(45),M=Object(T.a)((function(e){var t=Array.from(e.movies.values()).map((function(e){return e.genres}));return new Set(t.flat())}),(function(e){return e})),_=function(){var e=Object(o.b)(),t=Object(o.c)(M),a=Object(o.c)((function(e){return e.search?e.search.last:[]})),c=Object(n.useState)("all"),l=Object(j.a)(c,2),i=l[0],u=l[1],s=Object(n.useState)(""),m=Object(j.a)(s,2),E=m[0],d=m[1];return r.a.createElement(A.a,{fullWidth:!0,size:"small",style:{display:"flex",flexDirection:"row"}},r.a.createElement(x.a,{id:"select",value:i,onChange:function(t){u(t.target.value),e(P({genre:t.target.value,text:E}))}},r.a.createElement(k.a,{value:"all"},"All"),0!==t.size&&Array.from(t).map((function(e){return r.a.createElement(k.a,{key:e,value:e},e)}))),r.a.createElement("input",{type:"search",name:"search",id:"search",list:"search-select",onBlur:function(t){d(t.target.value),e(P({genre:i,text:t.target.value}))}}),r.a.createElement("datalist",{id:"search-select"},a&&a.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(w.a,null))},F=a(127),C=a(73),R=a(128),I=function(){var e=Object(o.c)((function(e){return e.user.login})),t=Object(n.useState)(null),a=Object(j.a)(t,2),c=a[0],l=a[1],i=function(){l(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{"aria-controls":"user-menu","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)}},r.a.createElement(R.a,null),e),r.a.createElement(C.a,{id:"user-menu",anchorEl:c,open:Boolean(c),onClose:i},r.a.createElement(E.b,{to:"/user"},r.a.createElement(k.a,{onClick:i},"Profile")),r.a.createElement(k.a,{onClick:i},"My list"),r.a.createElement(k.a,{onClick:i},"Log out")))},L=function(){return r.a.createElement(O.a,null,r.a.createElement(v.a,{maxWidth:"md"},r.a.createElement(p.a,{container:!0,spacing:1},r.a.createElement(p.a,{item:!0},r.a.createElement("span",null,"Realise Calendar")," | ",r.a.createElement("span",null,"My List")," | ",r.a.createElement("span",null,"Coming soon")),r.a.createElement(p.a,{item:!0},r.a.createElement(y.a,null,r.a.createElement(g.a,{value:"checkedC",inputProps:{"aria-label":"primary checkbox"}})))),r.a.createElement(p.a,{container:!0,spacing:1},r.a.createElement(p.a,{item:!0,xs:2},r.a.createElement(y.a,{variant:"h6"},r.a.createElement(E.b,{to:"/"},">MOViER+"))),r.a.createElement(p.a,{item:!0,xs:!0},r.a.createElement(h.a,{flexShrink:1},r.a.createElement(_,null))),r.a.createElement(p.a,{item:!0,xs:2},r.a.createElement(I,null)))))},U=(Object(T.a)((function(e){return Array.from(e.movies.values()).filter((function(e){return e.isFav}))}),(function(e){return e})),Object(T.a)((function(e){if(void 0===e.search)return e.movies;var t=e.search.values,a=t.genre,n=t.text;if(a||n){var r=Array.from(e.movies.values()).filter((function(e){return"all"===a||e.genres.includes(a)})).filter((function(e){return""===n||e.title.includes(n)})).reduce((function(e,t){return e.concat([[t.id,t]])}),[]);return new Map(r)}return e.movies}),(function(e){return e}))),V=Object(T.a)((function(e){if(void 0===e.user.likes)return new Map;var t=Array.from(e.user.likes);if(0!==t.length){var a=Array.from(e.movies.values()).filter((function(e){return t.includes(e.id)})).reduce((function(e,t){return e.concat([[t.id,t]])}),[]);return new Map(a)}return new Map}),(function(e){return e})),D=a(131),G=a(132),H=a(133),N=a(130),B=a(134),W="https://devlab.website/",z="ZF9wbG90bmlrb3ZhOllpTnNJbFRUckQ=",J="".concat(W,"v1/movies"),X="".concat(W,"v1/movie/"),Y="".concat(W,"v1/user/").concat("d_plotnikova"),Z=function(e){var t=Object(o.b)(),a=Object(n.useState)(!1),c=Object(j.a)(a,2),l=c[0],i=c[1],u=e.posterPath,s=e.id,m=e.isFavorite;return Object(n.useEffect)((function(){i(!1)}),[m]),r.a.createElement(D.a,null,r.a.createElement(G.a,{style:{height:"250px"},image:"".concat(W).concat(u)}),r.a.createElement(f.a,{variant:"middle"}),r.a.createElement(H.a,{disableSpacing:!0},r.a.createElement(E.b,{to:"/movie/".concat(s)},"More info"),r.a.createElement(N.a,{onClick:function(){i(!0),t(S(s,Boolean(m)))},color:m?"secondary":"default",disabled:l},r.a.createElement(B.a,null))))},Q=function(){var e=Object(o.c)(U),t=Object(o.c)((function(e){return e.user.likes}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h3",component:"h1"},"Movies"),r.a.createElement(p.a,{container:!0,alignItems:"stretch",spacing:1},e&&Array.from(e.values()).map((function(e){return r.a.createElement(p.a,{item:!0,xs:6,sm:3,md:2,key:e.id},r.a.createElement(Z,Object.assign({},e,{isFavorite:t&&t.includes(e.id)})))}))))},$=a(71),q=a.n($),K=a(25),ee={movies:new Map,search:{values:{genre:"",text:""}},user:{}},te=new Map([["@@APP/ROOT/PUT_MOVIES",function(e,t){return Object(K.a)({},e,{movies:t.payload})}],["@@APP/ROOT/CHANGE_FAV_MOVIE_STATUS",function(e,t){console.log("changeFavoriteMovie");var a=new Map(e.movies),n=a.get(t.payload);return n&&(n.isFavorite=!n.isFavorite,a.set(t.payload,n)),console.log(n),Object(K.a)({},e,{movies:a})}],["@@APP/ROOT/CHANGE_MOVES_USER",function(e,t){var a=t.payload,n=e.user,r=n.likes&&n.likes.indexOf(a);return-1!==r?n.likes.splice(r,1):n.likes.push(a),Object(K.a)({},e,{user:n})}],["@@APP/ROOT/ADD_SEARCH",function(e,t){var a=new Set(e.search.last||[]);if(a.add(t.payload.text),a.size>=6){var n=Array.from(a.values());a.delete(n[0])}return Object(K.a)({},e,{search:{values:{genre:t.payload.genre,text:t.payload.text},last:Array.from(a.values())}})}],["@@APP/ROOT/FETCH_USER",function(e,t){return Object(K.a)({},e,{user:t.payload})}],["DEFAULT",function(e){return console.log("reducer DEFAULT"),Object(K.a)({},e)}]]);var ae=function(e){var t=Object(o.b)(),a=(e.posterPath,e.title),c=e.overview,l=e.id,i=e.isFavorite,u=e.voteAverage,s=e.voteCount,m=Object(n.useState)(!1),E=Object(j.a)(m,2),d=E[0],v=E[1],f=Object(o.c)(V);return Object(n.useEffect)((function(){v(!1)}),[i]),r.a.createElement("div",null,r.a.createElement(y.a,{variant:"h3",component:"h1"},a),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(F.a,{variant:i?"contained":"outlined",color:i?"secondary":"default",startIcon:r.a.createElement(B.a,null),onClick:function(){v(!0),t(S(l,Boolean(i)))},disabled:d},i?"In my list":"Add to my list")),r.a.createElement("p",null,r.a.createElement(q.a,null),u," / 10 (",s,")"),r.a.createElement("p",null,c)),r.a.createElement("div",null,r.a.createElement(y.a,{variant:"h5",component:"h2"},"You Also might like"),r.a.createElement(p.a,{container:!0,alignItems:"stretch",spacing:1},f&&Array.from(f.values()).map((function(e){return r.a.createElement(p.a,{item:!0,xs:6,sm:3,md:2,key:e.id},r.a.createElement(Z,Object.assign({},e,{isFavorite:!0})))})))))},ne=a(72),re=a.n(ne),ce=function(){return r.a.createElement("div",null,r.a.createElement(y.a,{variant:"h4",component:"h1"},"My profile / ",r.a.createElement("b",null," Edit")),r.a.createElement(p.a,{container:!0,alignItems:"stretch",spacing:1},r.a.createElement(p.a,{item:!0,xs:12,md:3},"\u0424\u043e\u0442\u043a\u0430"),r.a.createElement(p.a,{item:!0,xs:12,md:9},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")))},le=function(){var e=Object(d.g)(),t=e.path,a=e.url;return r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:t},r.a.createElement(p.a,{container:!0,alignItems:"stretch",spacing:1},r.a.createElement(p.a,{item:!0,xs:12,md:9},r.a.createElement(p.a,{container:!0,item:!0,xs:12},r.a.createElement(p.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h4",component:"h1"},"My profile")),r.a.createElement(p.a,{item:!0,xs:12,md:3},"\u0424\u043e\u0442\u043a\u0430"),r.a.createElement(p.a,{item:!0,xs:12,md:9},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",r.a.createElement(F.a,{size:"small",endIcon:r.a.createElement(re.a,null),component:E.b,to:"".concat(a,"/edit")},"Edit"))),r.a.createElement(p.a,{container:!0,item:!0,xs:12},r.a.createElement(y.a,{variant:"h4",component:"h2"},"My List"),"You have XXX movies in your list",r.a.createElement(F.a,{variant:"outlined",component:E.b,to:"".concat(a,"/my-list")},"See All"))),r.a.createElement(p.a,{item:!0,xs:12,md:3},r.a.createElement(y.a,{variant:"h6",component:"h3"},"My activity"),r.a.createElement("div",null,"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"),r.a.createElement("div",null,"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"),r.a.createElement("div",null,"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f")))),r.a.createElement(d.b,{path:"".concat(t,"/edit")},r.a.createElement(ce,null)),r.a.createElement(d.b,{path:"".concat(t,"/my-list")},r.a.createElement("div",null,"My List")))},ie=function(){var e=Object(o.c)((function(e){return e.movies})),t=Object(o.c)((function(e){return e.user.likes}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement(L,null),r.a.createElement("div",{className:"App"},r.a.createElement(v.a,{maxWidth:"md"},r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(Q,null)),r.a.createElement(d.b,{path:"/login"},r.a.createElement(d.a,{to:"/user"})),r.a.createElement(d.b,{path:"/user"},r.a.createElement(le,null)),r.a.createElement(d.b,{path:"/movie/:id",children:function(a){var n=a.match;if(n){var c=Number(n.params.id);return e.has(c)?r.a.createElement(ae,Object.assign({},e.get(c),{isFavorite:t&&t.includes(c)})):r.a.createElement("div",null,"\u0442\u0430\u043a\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u043c\u0430 \u043d\u0435\u0442")}}}),r.a.createElement(d.b,{path:"*"},r.a.createElement("div",null," \u0422\u0435\u0431\u044f \u0442\u0443\u0442 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c "))))),r.a.createElement(b,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=a(29),ue=a.n(oe),se=a(23),me=a(14);function Ee(e){var t=Object.entries(e).reduce((function(e,t){var a,n=Object(j.a)(t,2),r=n[0],c=n[1];return Object(K.a)({},e,Object(me.a)({},(a=r).includes("_")?a.replace(/([-_]\w)/g,(function(e){return e[1].toUpperCase()})):a,c))}),{}),a=new Set(t.genres);return t.genres=Array.from(a).map((function(e){return e.replace(/"/g,"")})),[e.id,t]}var de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return fetch(e,{method:t,body:a?JSON.stringify(a):null,headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(z)}}).then((function(e){return e.json()})).then((function(e){if("undefined"===typeof e.type)return e;if("success"===e.type)return e;throw Error("err")}))},ve={load:function(){return de(J).then((function(e){var t=e.map(Ee);return new Map(t)}))},addLike:function(e){return de("".concat(X).concat(e,"/like"),"POST")},removeLike:function(e){return de("".concat(X).concat(e,"/like"),"DELETE")}},fe=function(){return de(Y).then((function(e){return e}))},pe=ue.a.mark(ye),he=ue.a.mark(ge),be=ue.a.mark(je),Oe=ue.a.mark(Ae);function ye(){var e;return ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(se.b)(ve.load);case 2:return e=t.sent,t.next=5,Object(se.d)({type:"@@APP/ROOT/PUT_MOVIES",payload:e});case 5:case"end":return t.stop()}}),pe)}function ge(){var e;return ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(se.b)(fe);case 2:return e=t.sent,t.next=5,Object(se.d)({type:"@@APP/ROOT/FETCH_USER",payload:e});case 5:case"end":return t.stop()}}),he)}function je(e){var t,a,n;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,a=t.id,n=t.currentStatus,console.log("SAGA-changeMoviesLikes",e),r.next=4,Object(se.b)(n?ve.removeLike:ve.addLike,a);case 4:if(!r.sent){r.next=10;break}return r.next=8,Object(se.d)({type:"@@APP/ROOT/CHANGE_MOVES_USER",payload:a});case 8:return r.next=10,Object(se.d)({type:"@@APP/ROOT/CHANGE_FAV_MOVIE_STATUS",payload:a});case 10:case"end":return r.stop()}}),be)}function Ae(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(se.a)([Object(se.c)(ge),Object(se.c)(ye)]);case 2:return e.next=4,Object(se.e)("@@APP/ROOT/SET_FAV_MOVIE_SAGA",je);case 4:case"end":return e.stop()}}),Oe)}var xe=Object(u.a)(),ke=Object(i.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;console.log("rootReducer: action",t.type);var a=te.has(t.type)?te.get(t.type):te.get("DEFAULT");return a(e,t)}),void 0,Object(i.a)(xe,m.a));xe.run(Ae),l.a.render(r.a.createElement(o.a,{store:ke},r.a.createElement(E.a,{basename:"/my-awesome-movie-searcher"},r.a.createElement(ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[82,1,2]]]);
//# sourceMappingURL=main.fa05ba74.chunk.js.map