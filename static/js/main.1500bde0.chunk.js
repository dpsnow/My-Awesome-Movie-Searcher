(this["webpackJsonpmy-awesome-movie-searcher"]=this["webpackJsonpmy-awesome-movie-searcher"]||[]).push([[0],{83:function(e,t,a){e.exports=a(96)},92:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),i=a(31),o=a(16),u=a(75),s=a(66),m=a.n(s),E=a(67),d=(a(92),a(19)),v=a(33),p=a(120),f=a(124),h=a(125),b=a(137),O=function(){return r.a.createElement(p.a,{maxWidth:"md",style:{marginTop:"60px"}},r.a.createElement(f.a,{variant:"fullWidth"}),r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement(b.a,null,r.a.createElement("a",{href:"/"},"Privacy Policy"),r.a.createElement("p",null,"\xa9 2010-",(new Date).getFullYear()," by Movier-plus.com, Inc."))))},y=a(17),g=function(e,t){return{type:"@@APP/ROOT/SET_FAV_MOVIE_SAGA",payload:{id:e,currentStatus:t}}},j=function(e){return{type:"@@APP/ROOT/ADD_SEARCH",payload:e}},A=a(45),x=Object(A.a)((function(e){var t=Array.from(e.movies.values()).map((function(e){return e.genres}));return new Set(t.flat())}),(function(e){return e})),w=a(126),k=a(138),S=a(139),P=a(127),T=function(){var e=Object(o.b)(),t=Object(o.c)(x),a=Object(o.c)((function(e){return e.search?e.search.last:[]})),c=Object(n.useState)("all"),l=Object(y.a)(c,2),i=l[0],u=l[1],s=Object(n.useState)(""),m=Object(y.a)(s,2),E=m[0],d=m[1];return r.a.createElement(w.a,{fullWidth:!0,size:"small",style:{display:"flex",flexDirection:"row"}},r.a.createElement(k.a,{id:"select",value:i,onChange:function(t){u(t.target.value),e(j({genre:t.target.value,text:E}))}},r.a.createElement(S.a,{value:"all"},"All"),0!==t.size&&Array.from(t).map((function(e){return r.a.createElement(S.a,{key:e,value:e},e)}))),r.a.createElement("input",{type:"search",name:"search",id:"search",list:"search-select",onBlur:function(t){d(t.target.value),e(j({genre:i,text:t.target.value}))}}),r.a.createElement("datalist",{id:"search-select"},a&&a.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(P.a,null))},M=a(128),_=a(74),C=a(129),F=function(){var e=Object(o.c)((function(e){return e.user.login})),t=Object(n.useState)(null),a=Object(y.a)(t,2),c=a[0],l=a[1],i=function(){l(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{"aria-controls":"user-menu","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)}},r.a.createElement(C.a,null),e),r.a.createElement(_.a,{id:"user-menu",anchorEl:c,open:Boolean(c),onClose:i},r.a.createElement(d.b,{to:"/user"},r.a.createElement(S.a,{onClick:i},"Profile")),r.a.createElement(S.a,{onClick:i},"My list"),r.a.createElement(S.a,{onClick:i},"Log out")))},R=a(97),I=a(130),U=a(140),V=function(){return r.a.createElement(R.a,null,r.a.createElement(p.a,{maxWidth:"md"},r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement(h.a,{item:!0},r.a.createElement("span",null,"Realise Calendar")," | ",r.a.createElement("span",null,"My List")," | ",r.a.createElement("span",null,"Coming soon")),r.a.createElement(h.a,{item:!0},r.a.createElement(I.a,null,r.a.createElement(U.a,{value:"checkedC",inputProps:{"aria-label":"primary checkbox"}})))),r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement(h.a,{item:!0,xs:2},r.a.createElement(I.a,{variant:"h6"},r.a.createElement(d.b,{to:"/"},">MOViER+"))),r.a.createElement(h.a,{item:!0,xs:!0},r.a.createElement(b.a,{flexShrink:1},r.a.createElement(T,null))),r.a.createElement(h.a,{item:!0,xs:2},r.a.createElement(F,null)))))},L=(Object(A.a)((function(e){return Array.from(e.movies.values()).filter((function(e){return e.isFav}))}),(function(e){return e})),Object(A.a)((function(e){if(void 0===e.search)return e.movies;var t=e.search.values,a=t.genre,n=t.text;if(a||n){var r=Array.from(e.movies.values()).filter((function(e){return"all"===a||e.genres.includes(a)})).filter((function(e){return""===n||e.title.includes(n)})).reduce((function(e,t){return e.concat([[t.id,t]])}),[]);return new Map(r)}return e.movies}),(function(e){return e}))),D=Object(A.a)((function(e){if(void 0===e.user.likes)return new Map;var t=Array.from(e.user.likes);if(0!==t.length){var a=Array.from(e.movies.values()).filter((function(e){return t.includes(e.id)})).reduce((function(e,t){return e.concat([[t.id,t]])}),[]);return new Map(a)}return new Map}),(function(e){return e})),G="https://devlab.website/",H="ZF9wbG90bmlrb3ZhOllpTnNJbFRUckQ=",N="".concat(G,"v1/movies"),W="".concat(G,"v1/movie/"),B="".concat(G,"v1/user/").concat("d_plotnikova"),z=a(132),J=a(133),X=a(134),Y=a(131),Z=a(135),Q=function(e){var t=Object(o.b)(),a=Object(n.useState)(!1),c=Object(y.a)(a,2),l=c[0],i=c[1],u=e.posterPath,s=e.id,m=e.isFavorite;return Object(n.useEffect)((function(){i(!1)}),[m]),r.a.createElement(z.a,null,r.a.createElement(J.a,{style:{height:"250px"},image:"".concat(G).concat(u)}),r.a.createElement(f.a,{variant:"middle"}),r.a.createElement(X.a,{disableSpacing:!0},r.a.createElement(d.b,{to:"/movie/".concat(s)},"More info"),r.a.createElement(Y.a,{onClick:function(){i(!0),t(g(s,Boolean(m)))},color:m?"secondary":"default",disabled:l},r.a.createElement(Z.a,null))))},$=function(){var e=Object(o.c)(L),t=Object(o.c)((function(e){return e.user.likes}));return r.a.createElement(h.a,{container:!0,alignItems:"stretch",spacing:1},e&&Array.from(e.values()).map((function(e){return r.a.createElement(h.a,{item:!0,xs:6,sm:3,md:2,key:e.id},r.a.createElement(Q,Object.assign({},e,{isFavorite:t&&t.includes(e.id)})))})))},q=a(25),K={movies:new Map,search:{values:{genre:"",text:""}},user:{}},ee=new Map([["@@APP/ROOT/PUT_MOVIES",function(e,t){return Object(q.a)({},e,{movies:t.payload})}],["@@APP/ROOT/CHANGE_FAV_MOVIE_STATUS",function(e,t){var a=new Map(e.movies),n=a.get(t.payload);return n&&(n.isFavorite=!n.isFavorite,a.set(t.payload,n)),Object(q.a)({},e,{movies:a})}],["@@APP/ROOT/CHANGE_MOVES_USER",function(e,t){var a=t.payload,n=e.user,r=n.likes&&n.likes.indexOf(a);return-1!==r?n.likes.splice(r,1):n.likes.push(a),Object(q.a)({},e,{user:n})}],["@@APP/ROOT/ADD_SEARCH",function(e,t){var a=new Set(e.search.last||[]);if(a.add(t.payload.text),a.size>=6){var n=Array.from(a.values());a.delete(n[0])}return Object(q.a)({},e,{search:{values:{genre:t.payload.genre,text:t.payload.text},last:Array.from(a.values())}})}],["@@APP/ROOT/FETCH_USER",function(e,t){return Object(q.a)({},e,{user:t.payload})}],["DEFAULT",function(e){return console.warn("reducer DEFAULT"),Object(q.a)({},e)}]]);var te=a(72),ae=a.n(te),ne=function(e){var t=Object(o.b)(),a=e.posterPath,c=e.title,l=e.overview,i=e.id,u=e.isFavorite,s=e.voteAverage,m=e.voteCount,E=e.genres,d=Object(n.useState)(!1),v=Object(y.a)(d,2),p=v[0],f=v[1],b=Object(o.c)(D);return Object(n.useEffect)((function(){f(!1)}),[u]),r.a.createElement("div",null,r.a.createElement(h.a,{container:!0,alignItems:"stretch",spacing:3},r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement("img",{src:"".concat(G).concat(a),width:"100%",alt:c})),r.a.createElement(h.a,{item:!0,xs:9},r.a.createElement("div",null,r.a.createElement(I.a,{variant:"h3",component:"h1"},c)),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(M.a,{variant:u?"contained":"outlined",color:u?"secondary":"default",startIcon:r.a.createElement(Z.a,null),onClick:function(){f(!0),t(g(i,Boolean(u)))},disabled:p},u?"In my list":"Add to my list")),r.a.createElement("p",null,r.a.createElement(ae.a,null),s," / 10 (",m,")"),r.a.createElement("p",null,l),r.a.createElement("p",null,E.map((function(e){return"| ".concat(e," ")})),"|")))),r.a.createElement("div",null,r.a.createElement(I.a,{variant:"h5",component:"h2"},"You Also might like"),r.a.createElement(h.a,{container:!0,alignItems:"stretch",spacing:1},b&&Array.from(b.values()).map((function(e){return r.a.createElement(h.a,{item:!0,xs:6,sm:3,md:2,key:e.id},r.a.createElement(Q,Object.assign({},e,{isFavorite:!0})))})))))},re=a(73),ce=a.n(re),le=function(){return r.a.createElement("div",null,r.a.createElement(I.a,{variant:"h4",component:"h1"},"My profile / ",r.a.createElement("b",null," Edit")),r.a.createElement(h.a,{container:!0,alignItems:"stretch",spacing:1},r.a.createElement(h.a,{item:!0,xs:12,md:3},"\u0424\u043e\u0442\u043a\u0430"),r.a.createElement(h.a,{item:!0,xs:12,md:9},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")))},ie=function(){var e=Object(v.g)(),t=e.path,a=e.url;return r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:t},r.a.createElement(h.a,{container:!0,alignItems:"stretch",spacing:1},r.a.createElement(h.a,{item:!0,xs:12,md:9},r.a.createElement(h.a,{container:!0,item:!0,xs:12},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(I.a,{variant:"h4",component:"h1"},"My profile")),r.a.createElement(h.a,{item:!0,xs:12,md:3},"\u0424\u043e\u0442\u043a\u0430"),r.a.createElement(h.a,{item:!0,xs:12,md:9},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",r.a.createElement(M.a,{size:"small",endIcon:r.a.createElement(ce.a,null),component:d.b,to:"".concat(a,"/edit")},"Edit"))),r.a.createElement(h.a,{container:!0,item:!0,xs:12},r.a.createElement(I.a,{variant:"h4",component:"h2"},"My List"),"You have XXX movies in your list",r.a.createElement(M.a,{variant:"outlined",component:d.b,to:"".concat(a,"/my-list")},"See All"))),r.a.createElement(h.a,{item:!0,xs:12,md:3},r.a.createElement(I.a,{variant:"h6",component:"h3"},"My activity"),r.a.createElement("div",null,"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"),r.a.createElement("div",null,"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"),r.a.createElement("div",null,"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f")))),r.a.createElement(v.b,{path:"".concat(t,"/edit")},r.a.createElement(le,null)),r.a.createElement(v.b,{path:"".concat(t,"/my-list")},r.a.createElement("div",null,"My List")))},oe=function(){var e=Object(o.c)((function(e){return e.movies})),t=Object(o.c)((function(e){return e.user.likes}));return r.a.createElement(d.a,null,r.a.createElement(V,null),r.a.createElement("div",{className:"App"},r.a.createElement(p.a,{maxWidth:"md"},r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/"},r.a.createElement($,null)),r.a.createElement(v.b,{path:"/login"},r.a.createElement(v.a,{to:"/user"})),r.a.createElement(v.b,{path:"/user"},r.a.createElement(ie,null)),r.a.createElement(v.b,{path:"/movie/:id",children:function(a){var n=a.match;if(n){var c=Number(n.params.id);return e.has(c)?r.a.createElement(ne,Object.assign({},e.get(c),{isFavorite:t&&t.includes(c)})):r.a.createElement("div",null,"\u0442\u0430\u043a\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u043c\u0430 \u043d\u0435\u0442")}}}),r.a.createElement(v.b,{path:"*"},r.a.createElement("div",null,"404 | \u0422\u0435\u0431\u044f \u0442\u0443\u0442 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c"))))),r.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=a(29),se=a.n(ue),me=a(23),Ee=a(14);function de(e){var t=Object.entries(e).reduce((function(e,t){var a,n=Object(y.a)(t,2),r=n[0],c=n[1];return Object(q.a)({},e,Object(Ee.a)({},(a=r).includes("_")?a.replace(/([-_]\w)/g,(function(e){return e[1].toUpperCase()})):a,c))}),{}),a=new Set(t.genres);return t.genres=Array.from(a).map((function(e){return e.replace(/"/g,"")})),[e.id,t]}var ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return fetch(e,{method:t,body:a?JSON.stringify(a):null,headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(H)}}).then((function(e){return e.json()})).then((function(e){if("undefined"===typeof e.type)return e;if("success"===e.type)return e;throw Error("err")}))},pe={load:function(){return ve(N).then((function(e){var t=e.map(de);return new Map(t)}))},addLike:function(e){return ve("".concat(W).concat(e,"/like"),"POST")},removeLike:function(e){return ve("".concat(W).concat(e,"/like"),"DELETE")}},fe=function(){return ve(B)},he=se.a.mark(ge),be=se.a.mark(je),Oe=se.a.mark(Ae),ye=se.a.mark(xe);function ge(){var e;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(me.b)(pe.load);case 2:return e=t.sent,t.next=5,Object(me.d)({type:"@@APP/ROOT/PUT_MOVIES",payload:e});case 5:case"end":return t.stop()}}),he)}function je(){var e;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(me.b)(fe);case 2:return e=t.sent,t.next=5,Object(me.d)({type:"@@APP/ROOT/FETCH_USER",payload:e});case 5:case"end":return t.stop()}}),be)}function Ae(e){var t,a,n;return se.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,a=t.id,n=t.currentStatus,r.next=3,Object(me.b)(n?pe.removeLike:pe.addLike,a);case 3:if(!r.sent){r.next=9;break}return r.next=7,Object(me.d)({type:"@@APP/ROOT/CHANGE_MOVES_USER",payload:a});case 7:return r.next=9,Object(me.d)({type:"@@APP/ROOT/CHANGE_FAV_MOVIE_STATUS",payload:a});case 9:case"end":return r.stop()}}),Oe)}function xe(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(me.a)([Object(me.c)(je),Object(me.c)(ge)]);case 2:return e.next=4,Object(me.e)("@@APP/ROOT/SET_FAV_MOVIE_SAGA",Ae);case 4:case"end":return e.stop()}}),ye)}var we=Object(u.a)(),ke=Object(i.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0,a=ee.has(t.type)?ee.get(t.type):ee.get("DEFAULT");return a(e,t)}),void 0,Object(E.composeWithDevTools)(Object(i.applyMiddleware)(m.a,we)));we.run(xe),l.a.render(r.a.createElement(o.a,{store:ke},r.a.createElement(d.a,{basename:"/my-awesome-movie-searcher"},r.a.createElement(oe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[83,1,2]]]);
//# sourceMappingURL=main.1500bde0.chunk.js.map